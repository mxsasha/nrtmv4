<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Near Real Time Mirroring (NRTM) version 4</title>
<meta content="Sasha Romijn" name="author">
<meta content="Job Snijders" name="author">
<meta content="Edward Shryane" name="author">
<meta content="Stavros Konstantaras" name="author">
<meta content="
       
      This document specifies a one-way synchronization protocol for Internet Routing Registry (IRR) records.
      The protocol allows instances of IRR database servers to mirror IRR records, specified in the Routing Policy Specification Language (RPSL), between each other.
       
    " name="description">
<meta content="xml2rfc 3.20.1" name="generator">
<meta content="NRTM" name="keyword">
<meta content="RPSL" name="keyword">
<meta content="IRR" name="keyword">
<meta content="draft-ietf-grow-nrtm-v4-03" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.20.1
    Python 3.12.2
    ConfigArgParse 1.7
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.3
    lxml 4.9.4
    platformdirs 4.2.0
    pycountry 23.12.11
    PyYAML 6.0.1
    requests 2.31.0
    setuptools 69.2.0
    six 1.16.0
    wcwidth 0.2.13
-->
<link href="draft-ietf-grow-nrtm-v4.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body class="xml2rfc">
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">NRTM v4</td>
<td class="right">March 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Romijn, et al.</td>
<td class="center">Expires 16 September 2024</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">GROW</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-grow-nrtm-v4-03</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-03-15" class="published">15 March 2024</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2024-09-16">16 September 2024</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">S. Romijn</div>
<div class="org">Reliably Coded</div>
</div>
<div class="author">
      <div class="author-name">J. Snijders</div>
<div class="org">Fastly</div>
</div>
<div class="author">
      <div class="author-name">E. Shryane</div>
<div class="org">RIPE NCC</div>
</div>
<div class="author">
      <div class="author-name">S. Konstantaras</div>
<div class="org">AMS-IX</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Near Real Time Mirroring (NRTM) version 4</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
      This document specifies a one-way synchronization protocol for Internet Routing Registry (IRR) records.
      The protocol allows instances of IRR database servers to mirror IRR records, specified in the Routing Policy Specification Language (RPSL), between each other.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-requirements-language">
<a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
      </h2>
<p id="section-note.1-1">
      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they appear in all capitals, as shown here.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 16 September 2024.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-informal-overview" class="internal xref">Informal overview</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-mirror-server-use" class="internal xref">Mirror server use</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-key-configuration" class="internal xref">Key Configuration</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-snapshot-initialization" class="internal xref">Snapshot Initialization</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-publishing-updates" class="internal xref">Publishing updates</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a href="#section-3.3.1" class="auto internal xref">3.3.1</a>.  <a href="#name-delta-files" class="internal xref">Delta Files</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.2">
                    <p id="section-toc.1-1.3.2.3.2.2.1"><a href="#section-3.3.2" class="auto internal xref">3.3.2</a>.  <a href="#name-snapshot-files" class="internal xref">Snapshot Files</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.3">
                    <p id="section-toc.1-1.3.2.3.2.3.1"><a href="#section-3.3.3" class="auto internal xref">3.3.3</a>.  <a href="#name-update-notification-file" class="internal xref">Update Notification File</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.4">
                    <p id="section-toc.1-1.3.2.3.2.4.1"><a href="#section-3.3.4" class="auto internal xref">3.3.4</a>.  <a href="#name-publication-policy-restrict" class="internal xref">Publication Policy Restrictions</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-mirror-client-use" class="internal xref">Mirror client use</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-client-configuration" class="internal xref">Client Configuration</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-initialization-from-snapsho" class="internal xref">Initialization from snapshot</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-processing-delta-files" class="internal xref">Processing Delta Files</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="auto internal xref">4.4</a>.  <a href="#name-signature-and-staleness-ver" class="internal xref">Signature and Staleness Verification</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="auto internal xref">4.5</a>.  <a href="#name-policy-restrictions" class="internal xref">Policy Restrictions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-update-notification-file-2" class="internal xref">Update Notification File</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-purpose" class="internal xref">Purpose</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-cache-concerns" class="internal xref">Cache concerns</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-file-format-and-validation" class="internal xref">File format and validation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="auto internal xref">5.4</a>.  <a href="#name-signature" class="internal xref">Signature</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-snapshot-file" class="internal xref">Snapshot File</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-purpose-2" class="internal xref">Purpose</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-cache-concerns-2" class="internal xref">Cache Concerns</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-file-format-and-validation-2" class="internal xref">File format and validation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-delta-file" class="internal xref">Delta File</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-purpose-3" class="internal xref">Purpose</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-cache-concerns-3" class="internal xref">Cache Concerns</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-file-format-and-validation-3" class="internal xref">File format and validation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-operational-considerations" class="internal xref">Operational Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-irr-object-validation" class="internal xref">IRR object Validation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-intermediate-mirror-instanc" class="internal xref">Intermediate mirror instances</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="auto internal xref">8.3</a>.  <a href="#name-reading-from-local-files" class="internal xref">Reading from local files</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#section-8.4" class="auto internal xref">8.4</a>.  <a href="#name-public-key-rotation" class="internal xref">Public key rotation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="auto internal xref">12.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="auto internal xref">12.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
      The Internet Routing Registry (IRR) consists of several IRR Databases, each storing objects in the Routing Policy Specification Language (RPSL).
      About a dozen larger IRR Databases are well known and widely used, operated by different organisations, like RIRs and some large network operators.
      IRR objects serve many purposes, ranging from manual research by operators to automated network configuration and filtering.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">
      Most of these well known IRR Databases mirror IRR objects from some others, so that queries run against these instances provide a comprehensive view.
      Some parties also mirror IRR Databases to private IRR server instances, to reduce latency in queries, analyze IRR objects, or other purposes.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">
      NRTM version 4 is a protocol for IRR mirroring, designed to address issues in existing IRR Database mirroring protocols.
      In NRTMv4, IRR Databases publish their records on an HTTPS endpoint, with periodic Snapshot Files and regular Delta Files.
      Signing allows integrity checks.
      By only generating files once and publishing them over HTTPS, scalability is dramatically improved.
      It borrows some concepts in <span>[<a href="#RFC8182" class="cite xref">RFC8182</a>]</span>, as there are overlaps between the two protocols.<a href="#section-1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-informal-overview">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-informal-overview" class="section-name selfRef">Informal overview</a>
      </h2>
<p id="section-2-1">
      In NRTMv4, a mirror server is an instance of IRR Database software that has a database of IRR objects and publishes them to allow mirroring by others.
      This can be retrieved by mirror clients, which then load the IRR objects into their local storage.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">
      Publication consists of three different files:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-3.1">
          <p id="section-2-3.1.1">
          A single Update Notification File.
          This specifies the current Database version and locations of the Snapshot File and Delta Files.
          Additionally, there is an Update Notification Signature File, used to verify the authenticity of the Update Notification File.<a href="#section-2-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-3.2">
          <p id="section-2-3.2.1">
          A single active Snapshot File.
          This contains all published IRR objects at a particular version.
          The mirror server periodically generates a new snapshot.<a href="#section-2-3.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-3.3">
          <p id="section-2-3.3.1">
          Zero or more Delta Files.
          These contain the changes between two database version numbers.<a href="#section-2-3.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-2-4">
       The Update Notification file MUST be in the JavaScript Object Notation (JSON) format <span>[<a href="#RFC8259" class="cite xref">RFC8259</a>]</span>.
       The Snapshot File and Delta Files MUST be in the JSON Text Sequences <span>[<a href="#RFC7464" class="cite xref">RFC7464</a>]</span> format, so that each object in large files can be parsed independently.
       All files MUST use UTF-8 encoding and MAY be compressed with GZIP <span>[<a href="#RFC1952" class="cite xref">RFC1952</a>]</span>.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">
       Mirror clients initially retrieve the small Update Notification File and a Snapshot File, from which they initialize their local copy of the Database.
       After that, mirror clients only retrieve the Update Notification File periodically to determine whether there are any changes, and then retrieve only the relevant Delta Files, if any.
       This minimizes data transfer.
       Deltas have sequential versions.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">
       Mirror clients are configured with the URL of an Update Notification File, name of the IRR Database, and a public signing key. This public key is used to verify the Update Notification File, which in turn contains hashes of all the Snapshot and Delta Files.<a href="#section-2-6" class="pilcrow">¶</a></p>
<p id="section-2-7">
       Upon initialization, the mirror server generates a session ID for the Database.
       This allows long term caching and used by the client to determine that the Delta Files continue to form a full set of changes allowing an update to the latest version.
       If the mirror server loses partial history, or the mirror client starts mirroring from a different server, the session ID change will force a full reload from the latest Snapshot File, ensuring there are no accidental mirroring gaps.<a href="#section-2-7" class="pilcrow">¶</a></p>
<p id="section-2-8">
       Mirror servers can use caching to reduce their load, particularly because snapshots and deltas are immutable for a given session ID and version number.
       These are also the largest files. Update Notification Files may not be cached for longer than one minute, but are fairly small.<a href="#section-2-8" class="pilcrow">¶</a></p>
<p id="section-2-9">
       Note that in NRTMv4, a contiguous version number is used for the Database version and Delta Files.
       This is different and unrelated to the serial in NRTMv3.
       NRTMv3 serials refer to a single change to a single object, whereas a NRTMv4 version refers to one delta, possibly containing multiple changes to multiple objects.
       NRTMv3 serials can also contain gaps, NRTMv4 versions may not.<a href="#section-2-9" class="pilcrow">¶</a></p>
</section>
<section id="section-3">
      <h2 id="name-mirror-server-use">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-mirror-server-use" class="section-name selfRef">Mirror server use</a>
      </h2>
<section id="section-3.1">
        <h3 id="name-key-configuration">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-key-configuration" class="section-name selfRef">Key Configuration</a>
        </h3>
<p id="section-3.1-1">
        When enabling NRTMv4 publication for an IRR Database, the operator MUST generate and configure a private Ed25519 <span>[<a href="#RFC8032" class="cite xref">RFC8032</a>]</span> key.
        The operator then provides this public key, the name of the IRR Database, and publication URL of the Update Notification File to any operators of mirror clients.
        The published public key MUST be encoded in base64 <span>[<a href="#RFC4648" class="cite xref">RFC4648</a>]</span>.
        The process for providing this is not in scope of this protocol, but a typical case is publication on the operator's known website.
        Key rotation is described in <a href="#public_key_rotation" class="auto internal xref">Section 8.4</a>.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">
        It is RECOMMENDED that implementations provide easily accessible tools for operators to generate new Ed25519 keys to enter into their configuration and assist with key rotation.
        All configuration options SHOULD be clearly named to indicate that they are private keys.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2">
        <h3 id="name-snapshot-initialization">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-snapshot-initialization" class="section-name selfRef">Snapshot Initialization</a>
        </h3>
<p id="section-3.2-1">
        A mirror server MUST follow the initialization steps upon the first export for an IRR Database by that mirror server, or if the server lost history and can not reliably produce a continuous set of deltas from a previous state.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">
        In other words, either the mirror server guarantees that clients following the deltas have a correct and complete view, or MUST reinitialize, which will force clients to reinitialize as well.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">
        Initialization consists of these actions:<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-4.1">
            <p id="section-3.2-4.1.1">
            The mirror server MUST generate a new session ID.
            This MUST be a random v4 UUID <span>[<a href="#RFC4122" class="cite xref">RFC4122</a>]</span> and MUST be the same across all client sessions.
            The session ID is unique to the IRR Database, so an instance that serves multiple IRR Databases, will create a separate session ID for each.<a href="#section-3.2-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.2-4.2">
            <p id="section-3.2-4.2.1">
            The server MUST generate a snapshot for version number one.
            This may contain an empty array of objects if the IRR Database is currently empty.<a href="#section-3.2-4.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.2-4.3">
            <p id="section-3.2-4.3.1">
            The server MUST generate a new Update Notification File with the new session ID, a reference to the new snapshot, and no deltas.<a href="#section-3.2-4.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.2-4.4">
            <p id="section-3.2-4.4.1">
            The Update Notification Signature File MUST be updated for the new Update Notification File contents.<a href="#section-3.2-4.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-3.2-5">
        Note that a publication, and its associated session IDs and versions, always relates to a single specific IRR Database, even if multiple databases are published from one instance.
        For example, a mirror server publishing NRTMv4 for RIPE and RIPE-NONAUTH, will generate two Update Notification Files, referring two Snapshot Files, and two sets of Delta Files each with contiguous version numbers - all completely independent to each other, with different session IDs, potentially at different times.
        This applies even if the same IRR server instance produces both.<a href="#section-3.2-5" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3">
        <h3 id="name-publishing-updates">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-publishing-updates" class="section-name selfRef">Publishing updates</a>
        </h3>
<section id="section-3.3.1">
          <h4 id="name-delta-files">
<a href="#section-3.3.1" class="section-number selfRef">3.3.1. </a><a href="#name-delta-files" class="section-name selfRef">Delta Files</a>
          </h4>
<p id="section-3.3.1-1">
          Changes to IRR objects MUST be recorded in Delta Files. One Delta File can contain multiple changes.<a href="#section-3.3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.3.1-2">
          Updates are generated as follows:<a href="#section-3.3.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.1-3.1">
              <p id="section-3.3.1-3.1.1">
              A mirror server MUST publish a Delta File approximately every minute, if there have been changes to IRR objects in that time frame.<a href="#section-3.3.1-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.1-3.2">
              <p id="section-3.3.1-3.2.1">
              If multiple changes have occurred within the time frame that would cancel each other out, like an addition and immediate deletion of the same object, the mirror server MUST still include all these changes.<a href="#section-3.3.1-3.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.1-3.3">
              <p id="section-3.3.1-3.3.1">
              If a mirror server is lagging in production of Delta Files, such as after an initialization or server downtime, it MUST generate one larger "catch up" Delta File, rather than individual Delta Files for every one minute window.<a href="#section-3.3.1-3.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.1-3.4">
              <p id="section-3.3.1-3.4.1">
              A new Delta File MUST be generated with a new version, one greater than the last Delta File version, or one greater than the last Snapshot File version if there were no prior deltas at all.<a href="#section-3.3.1-3.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.1-3.5">
              <p id="section-3.3.1-3.5.1">
              The Delta File MUST include all changes that happened during the time frame, in the order in which they occurred.<a href="#section-3.3.1-3.5.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.1-3.6">
              <p id="section-3.3.1-3.6.1">
              The URL where the Delta File is published MUST contain the session ID and version number to allow it to be indefinitely cached.
              It MUST also contain a random value that can not be predicted before publication, to counter negative caching issues.<a href="#section-3.3.1-3.6.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.1-3.7">
              <p id="section-3.3.1-3.7.1">
              After generating a new Delta File, a mirror server SHOULD remove all Delta Files older than 24 hours.<a href="#section-3.3.1-3.7.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.1-3.8">
              <p id="section-3.3.1-3.8.1">
              The Update Notification File MUST be updated to include the new Delta File and update the database version.<a href="#section-3.3.1-3.8.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.1-3.9">
              <p id="section-3.3.1-3.9.1">
              Note that, as Delta Files always contain changes compared to a previous state, there can never be a Delta File with version 1.<a href="#section-3.3.1-3.9.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
<section id="section-3.3.2">
          <h4 id="name-snapshot-files">
<a href="#section-3.3.2" class="section-number selfRef">3.3.2. </a><a href="#name-snapshot-files" class="section-name selfRef">Snapshot Files</a>
          </h4>
<p id="section-3.3.2-1">
          Snapshot Files after initialization are generated as follows:<a href="#section-3.3.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.2-2.1">
              <p id="section-3.3.2-2.1.1">
              The mirror server MUST generate a new Snapshot File between once per hour and once per day, if there have been changes to the IRR objects.<a href="#section-3.3.2-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.2-2.2">
              <p id="section-3.3.2-2.2.1">
              The version number of the new snapshot MUST be equal to the last Delta File version.<a href="#section-3.3.2-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.2-2.3">
              <p id="section-3.3.2-2.3.1">
              If there have been no changes to the IRR objects since the last snapshot, the mirror server MUST NOT generate a new snapshot.<a href="#section-3.3.2-2.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.2-2.4">
              <p id="section-3.3.2-2.4.1">
              The URL where the Snapshot File is published MUST contain the session ID and version number to allow it to be indefinitely cached.
              It MUST also contain a random value that can not be predicted before publication, to counter negative caching issues.<a href="#section-3.3.2-2.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.2-2.5">
              <p id="section-3.3.2-2.5.1">
              The Update Notification File MUST be updated to include the new snapshot, if one was generated.<a href="#section-3.3.2-2.5.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.2-2.6">
              <p id="section-3.3.2-2.6.1">
              Snapshot generation may take some time, and in that time newer changes may occur that are not part of the snapshot in progress.
              The mirror server SHOULD continue to produce Delta Files during this window, which means the server MAY publish a Snapshot File with a version number older than the most recent Delta File at the time of publication.<a href="#section-3.3.2-2.6.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
<section id="section-3.3.3">
          <h4 id="name-update-notification-file">
<a href="#section-3.3.3" class="section-number selfRef">3.3.3. </a><a href="#name-update-notification-file" class="section-name selfRef">Update Notification File</a>
          </h4>
<p id="section-3.3.3-1">
          The Update Notification File must be updated when a new Delta or Snapshot File is published and, even if there have been no changes, at least every 24 hours.<a href="#section-3.3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3.3-2">
          After any update to the Update Notification file, the mirror server MUST also generate a new Update Notification Signature File for the new Update Notification File contents.<a href="#section-3.3.3-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3.4">
          <h4 id="name-publication-policy-restrict">
<a href="#section-3.3.4" class="section-number selfRef">3.3.4. </a><a href="#name-publication-policy-restrict" class="section-name selfRef">Publication Policy Restrictions</a>
          </h4>
<p id="section-3.3.4-1">
          A mirror server MAY have a policy that restricts the publication of certain IRR objects or attributes, or modifies these before publication.
          Typical scenarios for this include preventing the distribution of certain personal data or password hashes, or excluding objects which do not meet validation rules like RPKI consistency.
          It is RECOMMENDED to modify objects in such a way that this change is evident to humans reading the object text, for example by adding remark lines or comments.<a href="#section-3.3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.3.4-2">
          Mirror servers are RECOMMENDED to remove password hashes from the auth lines in mntner objects, as they have little use beyond the authoritative server, and their publication may be a security risk.<a href="#section-3.3.4-2" class="pilcrow">¶</a></p>
<p id="section-3.3.4-3">
          If a mirror server has a policy that restricts or modifies object publication, this MUST be applied consistently to Snapshot Files and Delta Files from the moment the policy is enacted or modified.<a href="#section-3.3.4-3" class="pilcrow">¶</a></p>
</section>
</section>
</section>
<section id="section-4">
      <h2 id="name-mirror-client-use">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-mirror-client-use" class="section-name selfRef">Mirror client use</a>
      </h2>
<section id="section-4.1">
        <h3 id="name-client-configuration">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-client-configuration" class="section-name selfRef">Client Configuration</a>
        </h3>
<p id="section-4.1-1">
        Mirror clients are configured with the name of the IRR Database, the URL of the Update Notification File, and the public key currently used for signing the Update Notification File.
        Key rotation is described in <a href="#public_key_rotation" class="auto internal xref">Section 8.4</a>.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2">
        <h3 id="name-initialization-from-snapsho">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-initialization-from-snapsho" class="section-name selfRef">Initialization from snapshot</a>
        </h3>
<p id="section-4.2-1">
        Clients MUST initialize from a Snapshot File when initially configured or if they are not able to update their local data from the provided Delta Files:<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-2.1">
            <p id="section-4.2-2.1.1">
          The client MUST retrieve the Update Notification File.<a href="#section-4.2-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.2-2.2">
            <p id="section-4.2-2.2.1">
          The client MUST verify that the source attribute in the Update Notification File matches the configured IRR Database name.<a href="#section-4.2-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.2-2.3">
            <p id="section-4.2-2.3.1">
          The client MUST retrieve the Snapshot File and load the objects into its local storage.<a href="#section-4.2-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.2-2.4">
            <p id="section-4.2-2.4.1">
          The mirror client MUST verify that the hash of the Snapshot File matches the hash in the Update Notification File that referenced it.
          If the Snapshot File was compressed with GZIP, the hash MUST match the compressed data.
          In case of a mismatch of this hash, the file MUST be rejected.<a href="#section-4.2-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.2-2.5">
            <p id="section-4.2-2.5.1">
          The client MUST record the session_id and version of the loaded Snapshot File.<a href="#section-4.2-2.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
<section id="section-4.3">
        <h3 id="name-processing-delta-files">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-processing-delta-files" class="section-name selfRef">Processing Delta Files</a>
        </h3>
<p id="section-4.3-1">
        If a mirror client has previously initialized from a snapshot:<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3-2.1">
            <p id="section-4.3-2.1.1">
            The client MUST retrieve the Update Notification File.<a href="#section-4.3-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.3-2.2">
            <p id="section-4.3-2.2.1">
            The client MUST verify that the session ID matches the previously known session ID.
            If this does not match, the client MUST reinitialize from the snapshot.<a href="#section-4.3-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.3-2.3">
            <p id="section-4.3-2.3.1">
            The client MUST verify that the Update Notification File version is the same or higher than the client's current most recent version, to the latest version in the Update Notification File.
            If not, the Update Notification File MUST be rejected.<a href="#section-4.3-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.3-2.4">
            <p id="section-4.3-2.4.1">
            The client MUST verify that the Update Notification File contains one contiguous set of Delta File versions after the client's current most recent version up to the latest version in the Update Notification File.
            If the Delta File versions are not contiguous, the Update Notification File MUST be rejected.
            If the available Delta File versions do not range from the client's most recent version plus one, the client MUST reinitialize from the snapshot.<a href="#section-4.3-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.3-2.5">
            <p id="section-4.3-2.5.1">
            The client MUST retrieve all Delta Files for versions since the client's last known version, if there are any.<a href="#section-4.3-2.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.3-2.6">
            <p id="section-4.3-2.6.1">
            The mirror client MUST verify that the hash of each newly downloaded Delta File matches the hash in the Update Notification File that referenced it.
            If the Delta File was compressed with GZIP, the hash MUST match the compressed file.
            In case of a mismatch of this hash, the Delta File MUST be rejected.<a href="#section-4.3-2.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.3-2.7">
            <p id="section-4.3-2.7.1">
            The client MUST process all changes in the Delta Files in order: lowest Delta File version number first, and in the order of the changes list in the Delta File.<a href="#section-4.3-2.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.3-2.8">
            <p id="section-4.3-2.8.1">
            The client MUST update its record of the most recent version to the version of the Update Notification File.<a href="#section-4.3-2.8.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-4.3-3">
        If the Update Notification File or one of the Delta Files is rejected, the mirror client MUST NOT process any newer Deltas than those that are valid and have been successfully verified.
        If some Delta Files are rejected, it MAY process the valid Delta Files, but MUST NOT skip over any rejected Delta Files while doing so.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
</section>
<section id="section-4.4">
        <h3 id="name-signature-and-staleness-ver">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-signature-and-staleness-ver" class="section-name selfRef">Signature and Staleness Verification</a>
        </h3>
<p id="section-4.4-1">
        Every time a mirror client retrieves a new version of the Update Notification File, it MUST retrieve and verify the Update Notification Signature File.
        The signature MUST be valid for the configured public key for the contents of the Update Notification File.
        If the signature does not match, the mirror client MUST reject the Update Notification File, unless a key rotation is in progress as described in <a href="#public_key_rotation" class="auto internal xref">Section 8.4</a>.<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<p id="section-4.4-2">
        A mirror client can use the generation timestamp in the Update Notification File to check whether the file is stale, as the mirror server must update this file at least every 24 hours.
        If the generation timestamp is more than 24 hours ago, the file is stale and the mirror client SHOULD warn the operator in log messages or other alerting, but MAY continue to process it otherwise.<a href="#section-4.4-2" class="pilcrow">¶</a></p>
</section>
<section id="section-4.5">
        <h3 id="name-policy-restrictions">
<a href="#section-4.5" class="section-number selfRef">4.5. </a><a href="#name-policy-restrictions" class="section-name selfRef">Policy Restrictions</a>
        </h3>
<p id="section-4.5-1">
        A mirror client MAY have a policy that restricts the processing of objects to certain object classes, or other limitations on which objects it processes.<a href="#section-4.5-1" class="pilcrow">¶</a></p>
<p id="section-4.5-2">
        If a mirror client has a policy that restricts object processing, this MUST be applied consistently to Snapshot Files and Delta Files from the moment the policy is enacted or modified.<a href="#section-4.5-2" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-5">
      <h2 id="name-update-notification-file-2">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-update-notification-file-2" class="section-name selfRef">Update Notification File</a>
      </h2>
<section id="section-5.1">
        <h3 id="name-purpose">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-purpose" class="section-name selfRef">Purpose</a>
        </h3>
<p id="section-5.1-1">
        The Update Notification File is generated by the mirror server and used by mirror clients to discover whether any changes exist between the state of the IRR mirror server and of the mirror client's.
        It also describes the location of the Snapshot File and incremental Delta Files.
        Finally, the generation timestamp can be used to detect whether the file is stale.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">
        The mirror server MUST generate a new Update Notification File every time there are new deltas or snapshots and, even if there have been no changes, at least every 24 hours.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-5.2">
        <h3 id="name-cache-concerns">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-cache-concerns" class="section-name selfRef">Cache concerns</a>
        </h3>
<p id="section-5.2-1">
        A mirror server may use caching infrastructure to cache the Update Notification File and reduce the load of HTTPS requests.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">
        However, since this file is used by mirror clients to determine whether any updates are available, the mirror server SHOULD ensure that this file is not cached for longer than one minute.
        An exception to this rule is that it is better to serve a stale Update Notification File rather than no Update Notification File.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-5.3">
        <h3 id="name-file-format-and-validation">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-file-format-and-validation" class="section-name selfRef">File format and validation</a>
        </h3>
<p id="section-5.3-1">
        Example Update Notification File:<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3-2">
<pre>
{
  "nrtm_version": 4,
  "timestamp": "2022-01-01T15:00:00Z",
  "type": "notification",
  "next_signing_key": "bnJ0..bXY0",
  "source": "EXAMPLE",
  "session_id": "ca128382-78d9-41d1-8927-1ecef15275be",
  "version": 4,
  "snapshot": {
    "version": 3,
    "url": "https://example.com/ca128382-78d9-41d1-8927-1ecef15275be/nrtm-snapshot.2.047595d0fae972fbed0c51b4a41c7a349e0c47bb.json.gz",
    "hash": "9a..86"
  },
  "deltas": [
    {
      "version": 2,
      "url": "https://example.com/ca128382-78d9-41d1-8927-1ecef15275be/nrtm-delta.1.784a2a65aba22e001fd25a1b9e8544e058fbc703.json",
      "hash": "62..a2"
    },
    {
      "version": 3,
      "url": "https://example.com/ca128382-78d9-41d1-8927-1ecef15275be/nrtm-delta.2.0f681f07cfab5611f3681bf030ec9f6fa3442fb0.json",
      "hash": "25..9a"
    },
    {
      "version": 4,
      "url": "https://example.com/ca128382-78d9-41d1-8927-1ecef15275be/nrtm-delta.3.d9c194acbb2cb0d4088c9d8a25d5871cdd802c79.json",
      "hash": "b4..13"
    }
  ]
}
</pre><a href="#section-5.3-2" class="pilcrow">¶</a>
</div>
<p id="section-5.3-3">
        Note: hash and key values in this example are shortened because of formatting.<a href="#section-5.3-3" class="pilcrow">¶</a></p>
<p id="section-5.3-4">
        The following validation rules MUST be observed when creating or parsing Update Notification Files:<a href="#section-5.3-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-5.1">
            <p id="section-5.3-5.1.1">
            The filename MUST be "update-notification-file.json".<a href="#section-5.3-5.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-5.2">
            <p id="section-5.3-5.2.1">
            The nrtm_version MUST be 4.<a href="#section-5.3-5.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-5.3">
            <p id="section-5.3-5.3.1">
            The timestamp MUST be an <span>[<a href="#RFC3339" class="cite xref">RFC3339</a>]</span> timestamp.<a href="#section-5.3-5.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-5.4">
            <p id="section-5.3-5.4.1">
            The type MUST be "notification".<a href="#section-5.3-5.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-5.5">
            <p id="section-5.3-5.5.1">
            The optional field next_signing_key is used for in-band key rotation. If present, it MUST be an Ed25519 <span>[<a href="#RFC8032" class="cite xref">RFC8032</a>]</span> public key encoded in base64 <span>[<a href="#RFC4648" class="cite xref">RFC4648</a>]</span>, which matches the private key the mirror server will start using to sign the Update Notification File in the near future.
            Key rotation is described in <a href="#public_key_rotation" class="auto internal xref">Section 8.4</a>.
            If there is no next signing key, this key MUST be omitted.<a href="#section-5.3-5.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-5.6">
            <p id="section-5.3-5.6.1">
            The source MUST be a valid IRR object name <span>[<a href="#RFC2622" class="cite xref">RFC2622</a>]</span>.<a href="#section-5.3-5.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-5.7">
            <p id="section-5.3-5.7.1">
            The session_id attribute MUST be a random v4 UUID <span>[<a href="#RFC4122" class="cite xref">RFC4122</a>]</span> unique to this session for this source.<a href="#section-5.3-5.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-5.8">
            <p id="section-5.3-5.8.1">
            The version MUST be an unsigned positive integer and be equal to the highest version of the deltas and snapshot.<a href="#section-5.3-5.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-5.9">
            <p id="section-5.3-5.9.1">
            The file MUST contain exactly one snapshot.<a href="#section-5.3-5.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-5.10">
            <p id="section-5.3-5.10.1">
            The file MAY contain one or more deltas.<a href="#section-5.3-5.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-5.11">
            <p id="section-5.3-5.11.1">
            The deltas MUST have a sequential contiguous set of version numbers.<a href="#section-5.3-5.11.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-5.12">
            <p id="section-5.3-5.12.1">
            Each snapshot and delta element MUST have a version, HTTPS URL and hash attribute.
            If the snapshot or delta file was compressed with GZIP, the filename MUST end in ".gz". and the hash MUST match the compressed data.<a href="#section-5.3-5.12.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.3-5.13">
            <p id="section-5.3-5.13.1">
            The hash attribute in snapshot and delta elements MUST be the hexadecimal encoding of the SHA-256 hash <span>[<a href="#SHS" class="cite xref">SHS</a>]</span> of the referenced file.
            The mirror client MUST verify this hash when the file is retrieved and reject the file if the hash does not match.<a href="#section-5.3-5.13.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
<section id="section-5.4">
        <h3 id="name-signature">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-signature" class="section-name selfRef">Signature</a>
        </h3>
<p id="section-5.4-1">
        The mirror server publishes a signature for each Update Notification File, which the client uses to verify the contents against the known public key.<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.4-2.1">
            <p id="section-5.4-2.1.1">
            The contents of Update Notification File MUST be signed using Ed25519 <span>[<a href="#RFC8032" class="cite xref">RFC8032</a>]</span>.<a href="#section-5.4-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.4-2.2">
            <p id="section-5.4-2.2.1">
            The Update Notification File Signature File contains the Ed25519 signature encoded in base64 <span>[<a href="#RFC4648" class="cite xref">RFC4648</a>]</span>.<a href="#section-5.4-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.4-2.3">
            <p id="section-5.4-2.3.1">
            The Update Notification File Signature File MUST be published under the same path as the Update Notification File, under the filename "update-notification-file-[hash].sig", where the hash is the hexadecimal encoding of the SHA-256 hash <span>[<a href="#SHS" class="cite xref">SHS</a>]</span> of the Update Notification File contents.<a href="#section-5.4-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.4-2.4">
            <p id="section-5.4-2.4.1">
            To avoid race conditions, the mirror server MUST publish the new signature file before publishing the new Update Notification File, and SHOULD retain old signature files for at least 5 minutes after a new Update Notification File is published.<a href="#section-5.4-2.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</section>
<section id="section-6">
      <h2 id="name-snapshot-file">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-snapshot-file" class="section-name selfRef">Snapshot File</a>
      </h2>
<section id="section-6.1">
        <h3 id="name-purpose-2">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-purpose-2" class="section-name selfRef">Purpose</a>
        </h3>
<p id="section-6.1-1">
        The Snapshot File reflects the complete and current contents of all IRR objects in an IRR Database.
        Mirror clients MUST use this to initialize their local copy of the IRR Database.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-6.2">
        <h3 id="name-cache-concerns-2">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-cache-concerns-2" class="section-name selfRef">Cache Concerns</a>
        </h3>
<p id="section-6.2-1">
        A snapshot reflects the content of the IRR Database at a specific point in time; for that reason, it can be considered immutable data.
        Snapshot Files MUST be published at a URL that is unique to the specific session and version.
        The URL MUST also contain a random value that can not be predicted before publication, to counter negative caching issues.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">
        Because these files never change, they MAY be cached indefinitely.
        However, as snapshots are large and old snapshots will no longer be referred by newer Update Notification Files, it is RECOMMENDED that a limited interval is used in the order of hours or days.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<p id="section-6.2-3">
        To avoid race conditions where a mirror client retrieves an Update Notification File moments before it's updated, mirror servers SHOULD retain old Snapshot Files for at least 5 minutes after a new Update Notification File is published.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
</section>
<section id="section-6.3">
        <h3 id="name-file-format-and-validation-2">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-file-format-and-validation-2" class="section-name selfRef">File format and validation</a>
        </h3>
<p id="section-6.3-1">
        Example Snapshot File:<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.3-2">
<pre>
␞{
  "nrtm_version": 4,
  "type": "snapshot",
  "source": "EXAMPLE",
  "session_id": "ca128382-78d9-41d1-8927-1ecef15275be",
  "version": 3
}
␞{"object": "route: 192.0.2.0/24\norigin: AS65530\nsource: EXAMPLE"}
␞{"object": "route: 2001:db8::/32\norigin: AS65530\nsource: EXAMPLE"}
</pre><a href="#section-6.3-2" class="pilcrow">¶</a>
</div>
<p id="section-6.3-3">
        Note: IRR object texts in this example are shortened because of formatting.<a href="#section-6.3-3" class="pilcrow">¶</a></p>
<p id="section-6.3-4">
        The file is in JSON Text Sequences <span>[<a href="#RFC7464" class="cite xref">RFC7464</a>]</span> format, and MUST contain one or more records (it must contain at least the header).
        The first record is the file header, and the following validation rules MUST be observed when creating or parsing a Snapshot File header:<a href="#section-6.3-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3-5.1">
            <p id="section-6.3-5.1.1">
            The nrtm_version MUST be 4.<a href="#section-6.3-5.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-5.2">
            <p id="section-6.3-5.2.1">
            The type MUST be "snapshot".<a href="#section-6.3-5.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-5.3">
            <p id="section-6.3-5.3.1">
            The source MUST match the source in the Update Notification File.<a href="#section-6.3-5.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-5.4">
            <p id="section-6.3-5.4.1">
            The session_id attribute MUST match the session_id in the Update Notification File.<a href="#section-6.3-5.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-5.5">
            <p id="section-6.3-5.5.1">
            The version MUST be an unsigned positive integer, matching the Update Notification File entry for this snapshot.<a href="#section-6.3-5.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-6.3-6">
        The remaining records (zero or more) MUST each contain a string representation of an IRR object.
        The source attribute in the IRR object texts MUST match the source attribute of the Snapshot File.<a href="#section-6.3-6" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-7">
      <h2 id="name-delta-file">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-delta-file" class="section-name selfRef">Delta File</a>
      </h2>
<section id="section-7.1">
        <h3 id="name-purpose-3">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-purpose-3" class="section-name selfRef">Purpose</a>
        </h3>
<p id="section-7.1-1">
        A Delta File contains all changes for exactly one incremental update of the IRR Database.
        It may include new, modified and deleted objects. Delta Files can contain multiple alterations to multiple objects.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-7.2">
        <h3 id="name-cache-concerns-3">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-cache-concerns-3" class="section-name selfRef">Cache Concerns</a>
        </h3>
<p id="section-7.2-1">
        Deltas reflect the difference in content of the IRR Database from one version to another; for that reason, it can be considered immutable data.
        Delta Files MUST be published at a URL that is unique to the specific session and version.
        The URL MUST also contain a random value that can not be predicted before publication, to counter negative caching issues.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2">
        To avoid race conditions where a mirror client retrieves an Update Notification File moments before it's updated, mirror servers SHOULD retain old Delta Files for at least 5 minutes after a new Update Notification File is published that no longer contains these Delta Files.<a href="#section-7.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-7.3">
        <h3 id="name-file-format-and-validation-3">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-file-format-and-validation-3" class="section-name selfRef">File format and validation</a>
        </h3>
<p id="section-7.3-1">
        Example Delta File:<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.3-2">
<pre>
␞{
  "nrtm_version": 4,
  "type": "delta",
  "source": "EXAMPLE",
  "session_id": "ca128382-78d9-41d1-8927-1ecef15275be",
  "version": 3
}
␞{
  "action": "delete",
  "object_class": "person",
  "primary_key": "PRSN1-EXAMPLE"
}
␞{
  "action": "delete",
  "object_class": "route",
  "primary_key": "192.0.2.0/24AS65530"
}
␞{
  "action": "add_modify",
  "object": "route: 2001:db8::/32\norigin: AS65530\nsource: EXAMPLE"
}
</pre><a href="#section-7.3-2" class="pilcrow">¶</a>
</div>
<p id="section-7.3-3">
        Note: IRR object texts in this example are shortened because of formatting.<a href="#section-7.3-3" class="pilcrow">¶</a></p>
<p id="section-7.3-4">
        The file is in JSON Text Sequences <span>[<a href="#RFC7464" class="cite xref">RFC7464</a>]</span> format, and MUST contain two or more records (at least the header and one change).
        The first record is the file header, and the following validation rules MUST be observed when creating or parsing a Delta File header:<a href="#section-7.3-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.3-5.1">
            <p id="section-7.3-5.1.1">
            The nrtm_version MUST be 4.<a href="#section-7.3-5.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.3-5.2">
            <p id="section-7.3-5.2.1">
            The type MUST be "delta".<a href="#section-7.3-5.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.3-5.3">
            <p id="section-7.3-5.3.1">
            The source MUST match the source in the Update Notification File.<a href="#section-7.3-5.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.3-5.4">
            <p id="section-7.3-5.4.1">
            The session_id attribute MUST match the session_id in the Update Notification File.<a href="#section-7.3-5.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.3-5.5">
            <p id="section-7.3-5.5.1">
            The version MUST be an unsigned positive integer, matching the Update Notification File entry for this delta.<a href="#section-7.3-5.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-7.3-6">
        The remaining records (one or more) MUST each contain a JSON object representing a change, which MUST meet the following rules:<a href="#section-7.3-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.3-7.1">
            <p id="section-7.3-7.1.1">
            An action attribute, which is either "delete" for object deletions, or "add_modify" for additions or modifications.<a href="#section-7.3-7.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.3-7.2">
            <p id="section-7.3-7.2.1">
            If action is "delete": an object_class attribute with the RPSL object class name, and a primary_key attribute with the primary key, of the deleted object.
            For objects that are listed in <span>[<a href="#RFC2622" class="cite xref">RFC2622</a>]</span> and <span>[<a href="#RFC4012" class="cite xref">RFC4012</a>]</span> the primary key is the value of the RPSL field defined as "class key".
            For object classes that define a pair of attributes as class key, e.g. route, the values of the individual attributes are appended together without separators.
            For any other objects, the primary key is the value of the RPSL field with the same name as the object class name.
            The primary key and object class name are not case sensitive and therefore mirror clients MUST use case insensitive matching against their local database.<a href="#section-7.3-7.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.3-7.3">
            <p id="section-7.3-7.3.1">
            If action is "add_modify": an object attribute with the RPSL text of the new version of the object.<a href="#section-7.3-7.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</section>
<section id="section-8">
      <h2 id="name-operational-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-operational-considerations" class="section-name selfRef">Operational Considerations</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-irr-object-validation">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-irr-object-validation" class="section-name selfRef">IRR object Validation</a>
        </h3>
<p id="section-8.1-1">
        Throughout the years, various implementations of IRR servers have taken liberties with the various RFCs regarding RPSL.
        Implementations have introduced different new object classes, attributes and validation rules.
        Current IRR Databases also contain legacy objects which were created under different validation rules.
        In practice, there is no uniformly implemented standard for RPSL, but merely rough outlines partially documented in different places.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">
        This has the potential to create interoperability issues.
        Some are addressed by NRTMv4, like having a consistent character set when mirroring data between implementations.
        However, some issues can not be addressed in this way, such as one implementation introducing a new object class that is entirely unknown to another implementation.<a href="#section-8.1-2" class="pilcrow">¶</a></p>
<p id="section-8.1-3">
        A mirror client SHOULD be able to handle unknown object classes and objects that are invalid according to its own validation rules, which may mean simply discarding them, without rejecting remaining objects or preventing future updates.<a href="#section-8.1-3" class="pilcrow">¶</a></p>
<p id="section-8.1-4">
        It is RECOMMENDED for mirror clients to log these cases, particularly those where an object was discarded due to violating validation rules.
        These cases create an inconsistency between the IRR objects of the server and client, and logs facilitate later analysis.<a href="#section-8.1-4" class="pilcrow">¶</a></p>
<p id="section-8.1-5">
        It is RECOMMENDED for mirror clients to be flexible where possible and reasonable when applying their own validation rules to IRR objects retrieved from mirror servers.
        For example, a route object with an origin attribute that is not a valid AS number can't be usefully interpreted.
        There is no way for an IRR server to correctly parse and index such an object.
        However, a route-set object whose name does not start with "RS-" <span>[<a href="#RFC2622" class="cite xref">RFC2622</a>]</span>, or an inetnum with an unknown extra "org" attribute, still allows the mirror client to interpret it unambiguously even if it does not meet the mirror client's own validation rules for authoritative records.<a href="#section-8.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-8.2">
        <h3 id="name-intermediate-mirror-instanc">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-intermediate-mirror-instanc" class="section-name selfRef">Intermediate mirror instances</a>
        </h3>
<p id="section-8.2-1">
        An IRR Database generally has a single authoritative source.
        In some cases, an instance run by a third party will function as a kind of intermediate: both being a mirror client, mirroring IRR objects from the authoritative source, and simultaneously function as a mirror server to yet another mirror client.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2-2">
        There are various operational reasons for such a setup, such as the intermediate filtering certain records.
        Regardless of the reason, the mirror client and server function of an IRR server must be treated as separate processes.
        In particular, this means they MUST have separate session IDs.
        The intermediate server MUST NOT republish the same files it retrieved from the authoritative source with the same session ID.<a href="#section-8.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-8.3">
        <h3 id="name-reading-from-local-files">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-reading-from-local-files" class="section-name selfRef">Reading from local files</a>
        </h3>
<p id="section-8.3-1">
        In the typical use case for NRTMv4, a mirror client retrieves files from an HTTPS endpoint.
        However, implementations MAY also support reading from files on the local filesystem instead, for when operators want to use a different method to retrieve or distribute the files.
        When reading from local files, mirror clients SHOULD still follow all validation rules, including the validation of the signature and hashes.
        Mirror clients MUST NOT allow a mix of reading from local files and HTTPS for a specific IRR Database.<a href="#section-8.3-1" class="pilcrow">¶</a></p>
</section>
<div id="public_key_rotation">
<section id="section-8.4">
        <h3 id="name-public-key-rotation">
<a href="#section-8.4" class="section-number selfRef">8.4. </a><a href="#name-public-key-rotation" class="section-name selfRef">Public key rotation</a>
        </h3>
<p id="section-8.4-1">
        It is RECOMMENDED that IRR Database operators rotate the signing key on their mirror server about once per year.
        The next_signing_key field in the Update Notification File supports in-band key rotation using the following process:<a href="#section-8.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.4-2.1">
            <p id="section-8.4-2.1.1">
            The server operator generates a new key and configures this in the mirror server implementation as the upcoming new signing key.<a href="#section-8.4-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.4-2.2">
            <p id="section-8.4-2.2.1">
            The mirror server MUST include this key in the next_signing_key field in any Update Notification File generated while the new signing key is configured.
            Hence, the new signing key will start being propagated to the mirror clients with the next publication of the Notification File, which will take at most 24 hours.
            Mirror server implementations MAY offer a method to cause the  Notification Update File to be refreshed earlier, with the new_signing_key included, and thus start the propagation earlier.<a href="#section-8.4-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.4-2.3">
            <p id="section-8.4-2.3.1">
            When mirror clients next retrieve the Update Notification File, they MUST detect the next_signing_key field, and store the key in their configuration.<a href="#section-8.4-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.4-2.4">
            <p id="section-8.4-2.4.1">
            After allowing mirror clients time to have seen the new Update Notification File with the next_signing_key field, the mirror server operator configures the new key as currently active key, and removes the old key.
            Any Update Notification File generated after this point MUST be signed with this new key, and will not contain a next_signing_key field.<a href="#section-8.4-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.4-2.5">
            <p id="section-8.4-2.5.1">
            The RECOMMENDED period between publication of the upcoming key in the next_signing_key field, and removal of the old key, is one week. This offers all active clients a reasonable chance to follow the rotation process.<a href="#section-8.4-2.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.4-2.6">
            <p id="section-8.4-2.6.1">
            When mirror clients retrieve an Update Notification File and find that the signature does not match, they MUST attempt to verify against a next_signing_key encountered in a previous (valid) file.
            If the signature matches for this new key, the client MUST update its configuration to use the new key for validation.
            After this, the client MUST NOT use the old key for validation at any time: a mirror server can not switch back to an old key.<a href="#section-8.4-2.6.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-8.4-3">
          If a mirror client never retrieves an Update Notification file at any point during the rotation process, it will no longer be able to verify the signature.
          In that scenario manual recovery is required, similar to a first time configuration of a new mirror client.<a href="#section-8.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<section id="section-9">
      <h2 id="name-security-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-9-1">
      IRR objects serve many purposes, including automated network configuration and filtering.
      Manipulation of IRR objects can therefore have a significant security impact.
      However, security in existing protocols is mostly absent.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">
      Before NRTMv4, the most common protocols for IRR Database mirroring are FTP for retrieving full snapshots, and NRTM version 3 for retrieving later changes.
      There are no provisions for integrity or authenticity, and there are various scenarios where mirroring may not be reliable.<a href="#section-9-2" class="pilcrow">¶</a></p>
<p id="section-9-3">
      NRTMv4 requires integrity verification.
      The Delta and Snapshot Files are verified using the SHA-256 hash in the Update Notification File, and the Update Notification File is verified using its signature file.
      Additionally, the channel security offered by HTTPS further limits security risks.<a href="#section-9-3" class="pilcrow">¶</a></p>
<p id="section-9-4">
      By allowing publication on any HTTPS endpoint, NRTMv4 allows for extensive scaling, and there are many existing techniques and services to protect against denial-of-service attacks.
      In contrast, NRTMv3 required mirror clients to directly query the IRR server instance with special whois queries.
      This scales poorly, and there are no standard protections against denial-of-service available.<a href="#section-9-4" class="pilcrow">¶</a></p>
<p id="section-9-5">
      The HTTPS endpoint used for NRTMv4 MUST be configured according to the best practices in <span>[<a href="#RFC9325" class="cite xref">RFC9325</a>]</span>.
      Mirror clients MUST NOT use other protocols than HTTPS, such as HTTP or FTP.<a href="#section-9-5" class="pilcrow">¶</a></p>
</section>
<section id="section-10">
      <h2 id="name-iana-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-10-1">
      This document requests IANA to ...<a href="#section-10-1" class="pilcrow">¶</a></p>
</section>
<section id="section-11">
      <h2 id="name-acknowledgments">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-11-1">
      The authors would like to thank
        George Michaelson, Shon Huang
      and
      ...
      for their helpful review of this document.<a href="#section-11-1" class="pilcrow">¶</a></p>
</section>
<section id="section-12">
      <h2 id="name-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-12.1">
        <h3 id="name-normative-references">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC1952">[RFC1952]</dt>
        <dd>
<span class="refAuthor">Deutsch, P.</span>, <span class="refTitle">"GZIP file format specification version 4.3"</span>, <span class="seriesInfo">RFC 1952</span>, <span class="seriesInfo">DOI 10.17487/RFC1952</span>, <time datetime="1996-05" class="refDate">May 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1952">https://www.rfc-editor.org/info/rfc1952</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2622">[RFC2622]</dt>
        <dd>
<span class="refAuthor">Alaettinoglu, C.</span>, <span class="refAuthor">Villamizar, C.</span>, <span class="refAuthor">Gerich, E.</span>, <span class="refAuthor">Kessens, D.</span>, <span class="refAuthor">Meyer, D.</span>, <span class="refAuthor">Bates, T.</span>, <span class="refAuthor">Karrenberg, D.</span>, and <span class="refAuthor">M. Terpstra</span>, <span class="refTitle">"Routing Policy Specification Language (RPSL)"</span>, <span class="seriesInfo">RFC 2622</span>, <span class="seriesInfo">DOI 10.17487/RFC2622</span>, <time datetime="1999-06" class="refDate">June 1999</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2622">https://www.rfc-editor.org/info/rfc2622</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3339">[RFC3339]</dt>
        <dd>
<span class="refAuthor">Klyne, G.</span> and <span class="refAuthor">C. Newman</span>, <span class="refTitle">"Date and Time on the Internet: Timestamps"</span>, <span class="seriesInfo">RFC 3339</span>, <span class="seriesInfo">DOI 10.17487/RFC3339</span>, <time datetime="2002-07" class="refDate">July 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3339">https://www.rfc-editor.org/info/rfc3339</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4012">[RFC4012]</dt>
        <dd>
<span class="refAuthor">Blunk, L.</span>, <span class="refAuthor">Damas, J.</span>, <span class="refAuthor">Parent, F.</span>, and <span class="refAuthor">A. Robachevsky</span>, <span class="refTitle">"Routing Policy Specification Language next generation (RPSLng)"</span>, <span class="seriesInfo">RFC 4012</span>, <span class="seriesInfo">DOI 10.17487/RFC4012</span>, <time datetime="2005-03" class="refDate">March 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4012">https://www.rfc-editor.org/info/rfc4012</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4122">[RFC4122]</dt>
        <dd>
<span class="refAuthor">Leach, P.</span>, <span class="refAuthor">Mealling, M.</span>, and <span class="refAuthor">R. Salz</span>, <span class="refTitle">"A Universally Unique IDentifier (UUID) URN Namespace"</span>, <span class="seriesInfo">RFC 4122</span>, <span class="seriesInfo">DOI 10.17487/RFC4122</span>, <time datetime="2005-07" class="refDate">July 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4122">https://www.rfc-editor.org/info/rfc4122</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4648">[RFC4648]</dt>
        <dd>
<span class="refAuthor">Josefsson, S.</span>, <span class="refTitle">"The Base16, Base32, and Base64 Data Encodings"</span>, <span class="seriesInfo">RFC 4648</span>, <span class="seriesInfo">DOI 10.17487/RFC4648</span>, <time datetime="2006-10" class="refDate">October 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4648">https://www.rfc-editor.org/info/rfc4648</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7464">[RFC7464]</dt>
        <dd>
<span class="refAuthor">Williams, N.</span>, <span class="refTitle">"JavaScript Object Notation (JSON) Text Sequences"</span>, <span class="seriesInfo">RFC 7464</span>, <span class="seriesInfo">DOI 10.17487/RFC7464</span>, <time datetime="2015-02" class="refDate">February 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7464">https://www.rfc-editor.org/info/rfc7464</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8032">[RFC8032]</dt>
        <dd>
<span class="refAuthor">Josefsson, S.</span> and <span class="refAuthor">I. Liusvaara</span>, <span class="refTitle">"Edwards-Curve Digital Signature Algorithm (EdDSA)"</span>, <span class="seriesInfo">RFC 8032</span>, <span class="seriesInfo">DOI 10.17487/RFC8032</span>, <time datetime="2017-01" class="refDate">January 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8032">https://www.rfc-editor.org/info/rfc8032</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8259">[RFC8259]</dt>
        <dd>
<span class="refAuthor">Bray, T., Ed.</span>, <span class="refTitle">"The JavaScript Object Notation (JSON) Data Interchange Format"</span>, <span class="seriesInfo">STD 90</span>, <span class="seriesInfo">RFC 8259</span>, <span class="seriesInfo">DOI 10.17487/RFC8259</span>, <time datetime="2017-12" class="refDate">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8259">https://www.rfc-editor.org/info/rfc8259</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9325">[RFC9325]</dt>
        <dd>
<span class="refAuthor">Sheffer, Y.</span>, <span class="refAuthor">Saint-Andre, P.</span>, and <span class="refAuthor">T. Fossati</span>, <span class="refTitle">"Recommendations for Secure Use of Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS)"</span>, <span class="seriesInfo">BCP 195</span>, <span class="seriesInfo">RFC 9325</span>, <span class="seriesInfo">DOI 10.17487/RFC9325</span>, <time datetime="2022-11" class="refDate">November 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9325">https://www.rfc-editor.org/info/rfc9325</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SHS">[SHS]</dt>
      <dd>
<span class="refAuthor">National Institute of Standards and Technology</span>, <span class="refTitle">"Secure Hash Standard"</span>, <time datetime="2012-03" class="refDate">March 2012</time>, <span>&lt;<a href="https://csrc.nist.gov/publications/fips/fips180-4/fips-180-4.pdf">https://csrc.nist.gov/publications/fips/fips180-4/fips-180-4.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-12.2">
        <h3 id="name-informative-references">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC8182">[RFC8182]</dt>
      <dd>
<span class="refAuthor">Bruijnzeels, T.</span>, <span class="refAuthor">Muravskiy, O.</span>, <span class="refAuthor">Weber, B.</span>, and <span class="refAuthor">R. Austein</span>, <span class="refTitle">"The RPKI Repository Delta Protocol (RRDP)"</span>, <span class="seriesInfo">RFC 8182</span>, <span class="seriesInfo">DOI 10.17487/RFC8182</span>, <time datetime="2017-07" class="refDate">July 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8182">https://www.rfc-editor.org/info/rfc8182</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Sasha Romijn</span></div>
<div dir="auto" class="left"><span class="org">Reliably Coded</span></div>
<div dir="auto" class="left"><span class="locality">Amsterdam</span></div>
<div dir="auto" class="left"><span class="country-name">Netherlands</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:sasha@reliablycoded.nl" class="email">sasha@reliablycoded.nl</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Job Snijders</span></div>
<div dir="auto" class="left"><span class="org">Fastly</span></div>
<div dir="auto" class="left"><span class="locality">Amsterdam</span></div>
<div dir="auto" class="left"><span class="country-name">Netherlands</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:job@fastly.com" class="email">job@fastly.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Edward Shryane</span></div>
<div dir="auto" class="left"><span class="org">RIPE NCC</span></div>
<div dir="auto" class="left"><span class="locality">Amsterdam</span></div>
<div dir="auto" class="left"><span class="country-name">Netherlands</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:eshryane@ripe.net" class="email">eshryane@ripe.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Stavros Konstantaras</span></div>
<div dir="auto" class="left"><span class="org">AMS-IX</span></div>
<div dir="auto" class="left"><span class="locality">Amsterdam</span></div>
<div dir="auto" class="left"><span class="country-name">Netherlands</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:stavros.konstantaras@ams-ix.net" class="email">stavros.konstantaras@ams-ix.net</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
